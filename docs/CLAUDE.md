# docs - 项目文档模块

**[根目录](../CLAUDE.md) > docs**

**模块职责**: 项目开发文档、编程规范、技术说明
**状态**: 活跃维护
**最后更新**: 2025-10-21 18:37:25 CST

---

## 模块说明

本模块包含项目的**技术文档**与**开发规范**，为开发团队提供：
- 系统设计文档
- 硬件配置规范
- 编码风格指南
- 开发流程说明

---

## 文档清单

| 文档名称 | 路径 | 说明 | 最后更新 |
|---------|------|------|---------|
| **开发文档** | [开发文档.md](./开发文档.md) | 系统架构、硬件配置、开发计划 | 2025-01 |
| **编程规范** | [编程规范.md](./编程规范.md) | 代码风格、命名规则、Git 提交规范 | 2025-01 |
| **AI 上下文** | [CLAUDE.md](../CLAUDE.md) (根级) | AI 辅助开发指引 | 2025-10-21 |

---

## 文档摘要

### 开发文档 (`开发文档.md`)

**核心内容**:
- **项目概述**: YOLO 云台追踪系统 - STM32 控制端
- **系统架构**: 4 层架构（应用层、算法层、中间层、驱动层）
- **硬件配置**: 引脚分配、外设参数、时钟树配置
- **软件模块**: 7 个模块（IMU 驱动 ✅、舵机控制 ⏳、CRSF 协议 ⏳、Jetson 通信 ⏳、姿态融合 ⏳、PID 控制 ⏳、状态机 ⏳）
- **通信协议**: Jetson ↔ STM32 通信规范、CRSF 协议规范
- **开发流程**: 4 阶段开发计划（硬件验证 → 通信协议 → 姿态融合 → 系统集成）
- **测试计划**: 单元测试与集成测试用例

**关键技术指标**:
| 指标 | 目标值 |
|-----|--------|
| 舵机控制精度 | ±2° |
| 姿态解算精度 | ±2° |
| 控制循环频率 | 1kHz |
| 端到端延迟 | <50ms |
| 失联检测时间 | 1秒 |
| 连续运行时间 | >24小时 |

### 编程规范 (`编程规范.md`)

**核心原则**:
1. **KISS** (Keep It Simple, Stupid) - 简单优先
2. **YAGNI** (You Aren't Gonna Need It) - 不过度设计
3. **DRY** (Don't Repeat Yourself) - 避免重复代码

**强制性规则** (违反不通过审查):
- ❌ 禁止 `malloc/free` (动态内存)
- ❌ 禁止递归调用 (栈空间有限)
- ❌ 禁止中断中浮点除法
- ❌ 禁止中断中调用 HAL 延时函数
- ❌ 全局变量必须加 `volatile` (中断访问)

**命名规范速查**:
| 类型 | 格式 | 示例 |
|-----|------|------|
| 公共函数 | 模块_动词名词() | `IMU_ReadData()` |
| 私有函数 | static + 小驼峰 | `static void calculateAngle()` |
| 全局变量 | g_ + 小驼峰 | `volatile uint8_t g_uartRxBuffer[256]` |
| 常量/宏 | 全大写 + 下划线 | `#define SERVO_ANGLE_MAX 270.0f` |
| 结构体 | 大驼峰 + _t | `typedef struct { ... } IMU_Data_t;` |

**Git 提交规范** (Conventional Commits):
```bash
<类型>(<范围>): <简短描述>

# 示例
feat(servo): 实现舵机角度到PWM转换功能
fix(crsf): 修复CRC校验错误
docs(readme): 更新编译说明
```

---

## 文档维护指南

### 何时更新文档

| 触发条件 | 需更新文档 |
|---------|----------|
| 添加新功能 | 更新开发文档模块清单 |
| 修改硬件配置 | 更新开发文档引脚分配表 |
| 修改通信协议 | 更新开发文档协议规范 |
| 修改编码规范 | 更新编程规范文档 |
| 完成阶段性开发 | 更新开发文档检查清单 |

### 文档编写规范

1. **使用 Markdown 格式**
   - 清晰的标题层级（`#`, `##`, `###`）
   - 代码块使用语法高亮（` ```c ` ）
   - 表格对齐美观
   - 使用 Mermaid 绘制流程图

2. **保持信息准确**
   - 修改代码后同步更新文档
   - 技术参数需标注来源（数据手册/实测）
   - 待实现功能标注 ⏳ 状态

3. **便于查找**
   - 提供目录索引
   - 关键信息使用表格归纳
   - 常见问题独立章节

---

## 文档使用场景

### 新成员入门
1. 阅读 [根级 CLAUDE.md](../CLAUDE.md) 了解项目整体
2. 阅读 [开发文档.md](./开发文档.md) 熟悉技术栈
3. 阅读 [编程规范.md](./编程规范.md) 了解代码风格
4. 阅读 [Core/CLAUDE.md](../Core/CLAUDE.md) 熟悉核心模块

### 开发功能前
1. 查阅 [开发文档.md](./开发文档.md) 确认模块依赖
2. 查阅 [编程规范.md](./编程规范.md) 确认命名规范
3. 参考已有模块（如 `imu.c/h`）的实现风格

### 调试问题时
1. 查阅 [开发文档.md](./开发文档.md) 故障排查清单
2. 查阅 [Core/CLAUDE.md](../Core/CLAUDE.md) 常见问题 FAQ
3. 参考硬件配置表确认引脚是否正确

### AI 辅助开发
1. 查阅 [根级 CLAUDE.md](../CLAUDE.md) AI 使用指引
2. 使用文档中的提问模板
3. 提供相关文档链接给 AI

---

## 未来文档计划

### 待添加文档

- [ ] **API 参考手册** - 所有模块 API 详细说明（Doxygen 生成）
- [ ] **硬件设计文档** - 原理图、PCB 布局、接口定义
- [ ] **测试报告** - 单元测试、集成测试、性能测试结果
- [ ] **版本发布说明** - 每个版本的变更日志
- [ ] **故障诊断手册** - 常见硬件/软件问题排查指南

### 改进方向

1. **自动化文档生成**
   - 使用 Doxygen 从代码注释生成 API 文档
   - 使用脚本从 Git 日志生成 CHANGELOG

2. **文档可视化**
   - 添加更多 Mermaid 流程图/时序图
   - 生成引脚配置导出表格

3. **文档翻译**
   - 添加英文版文档（便于国际协作）

---

## 相关链接

### 外部参考文档
- [STM32F1xx HAL 库文档](https://www.st.com/resource/en/user_manual/um1850.pdf)
- [MPU6050 数据手册](https://invensense.tdk.com/products/motion-tracking/6-axis/mpu-6050/)
- [CRSF 协议规范](https://github.com/crsf-wg/crsf/wiki)
- [Markdown 语法指南](https://www.markdownguide.org/)
- [Conventional Commits](https://www.conventionalcommits.org/)

### 项目内部文档
- [根级文档](../CLAUDE.md)
- [Core 模块文档](../Core/CLAUDE.md)
- [Drivers 模块文档](../Drivers/CLAUDE.md)

---

**最后更新**: 2025-10-21 18:37:25 CST
**维护状态**: 活跃维护中
